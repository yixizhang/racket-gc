#! /bin/bash

# remove existing data & graph
rm basic/*.rktd 2> /dev/null
rm basic/*.pdf 2> /dev/null

# copy cache model to pwd
cp ../caches/caches-1.rkt cache.rkt 2> /dev/null

# generate data
for ratio in {3..10};
do
    for coll in generational hybrid;
    do
        cp collectors/$coll-$ratio.rkt collector.rkt 2> /dev/null
        for test in `ls basic/*.rkt`;
        do
            echo "$coll-$ratio -> $test"
            racket runner.rkt $coll $test $ratio
        done
    done
done

# generate graph
racket plot-graphs.rkt
